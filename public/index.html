<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>ME2 SMC</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
		<link rel="stylesheet" href="/cdn/bundle/assets/bundle.1.0.0.css" />
		<style>
		.text-muted{
			color: #aaa;
		}
		</style>
	</head>
	<body>
		<div id="app" class="container">
			<div class="panel panel-default">
				<div class="panel-body" data-bind="with: logic">
					<table class="table table-rounded table-striped setup-table table-condensed">
						<thead>
							<tr>
								<th></th>
								<th>
									<span data-bind="click: function () { $data.all_recruited(!$data.all_recruited()); }">
										<span data-bind="
											css: {
												'glyphicon glyphicon-ok': true,
												'text-muted': !$data.all_recruited()
											}
										" class=""></span>
										Recruited
									</span>
								</th>
								<th>
									<span data-bind="click: function () { $data.all_loyal(!$data.all_loyal()); }">
										<span data-bind="
											css: {
												'glyphicon glyphicon-heart': true,
												'text-muted': !$data.all_loyal()
											}
										" class=""></span>
										Loyal
									</span>
								</th>
								<th>
									<span data-bind="click: function () { $data.all_upgraded(!$data.all_upgraded()); }">
										<span data-bind="
											css: {
												'glyphicon glyphicon-circle-arrow-up': true,
												'text-muted': !$data.all_upgraded()
											}
										" class=""></span>
										Upgraded
									</span>
								</th>
								<th>Approach</th>
								<th>Vents</th>
								<th>Long Walk</th>
								<th>Boss</th>
								<th>Outcome</th>
							</tr>
						</thead>
						<tbody>
						<!-- ko foreach: {data: pool, as: 'teammate'} -->
							<tr data-bind="css: {'text-muted': !is_recruited() }">
								<td>
									<a href="#view-profile" data-bind="click: function () { }">
										<span data-bind="text: teammate.name"></span>
									</a>
								</td>
								<td>
									<!-- ko component: { name: 'observable-toggle', params: {
										observable: teammate.is_recruited,
										icon: "ok",
										supertext: ""
									} } --><!-- /ko -->
								</td>
								<td>
									<span data-bind="if: teammate.is_recruited">
									<!-- ko component: { name: 'observable-toggle', params: {
										observable: teammate.is_loyal,
										icon: "heart",
										supertext: ""
									} } --><!-- /ko -->
									</span>
								</td>
								<td>
									<span data-bind="if: teammate.is_loyal">
									<!-- ko component: { name: 'observable-toggle', params: {
										observable: teammate.is_upgraded,
										icon: "circle-arrow-up",
										supertext: ""
									} } --><!-- /ko -->
									</span>
								</td>
								<td>
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.approach_squadmate_1,
										pool: $root.logic.approach_squadmate_pool_1,
										role: Role.ApproachSquadmate1,
										icon: "user",
										supertext: "1"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.approach_squadmate_2,
										pool: $root.logic.approach_squadmate_pool_2,
										role: Role.ApproachSquadmate2,
										icon: "user",
										supertext: "2"
									} } --><!-- /ko -->
								</td>
								<td>
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.vents_specialist,
										pool: $root.logic.vents_specialist_pool,
										role: Role.VentsSpecialist,
										icon: "star",
										supertext: ""
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.vents_fireteam_leader,
										pool: $root.logic.vents_fireteam_leader_pool,
										role: Role.VentsFireteamLeader,
										icon: "fire",
										supertext: ""
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.vents_squadmate_1,
										pool: $root.logic.vents_squadmate_pool_1,
										role: Role.VentsSquadmate1,
										icon: "user",
										supertext: "1"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.vents_squadmate_2,
										pool: $root.logic.vents_squadmate_pool_2,
										role: Role.VentsSquadmate2,
										icon: "user",
										supertext: "2"
									} } --><!-- /ko -->
								</td>
								<td>
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.long_walk_specialist,
										pool: $root.logic.long_walk_specialist_pool,
										role: Role.LongWalkSpecialist,
										icon: "star",
										supertext: ""
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.long_walk_fireteam_leader,
										pool: $root.logic.long_walk_fireteam_leader_pool,
										role: Role.LongWalkFireteamLeader,
										icon: "fire",
										supertext: ""
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.long_walk_escort,
										pool: $root.logic.long_walk_escort_pool,
										role: Role.LongWalkEscort,
										icon: "heart-empty",
										supertext: ""
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.long_walk_squadmate_1,
										pool: $root.logic.long_walk_squadmate_pool_1,
										role: Role.LongWalkSquadmate1,
										icon: "user",
										supertext: "1"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.long_walk_squadmate_2,
										pool: $root.logic.long_walk_squadmate_pool_2,
										role: Role.LongWalkSquadmate2,
										icon: "user",
										supertext: "2"
									} } --><!-- /ko -->
								</td>
								<td>
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.boss_squadmate_1,
										pool: $root.logic.boss_squadmate_pool_1,
										role: Role.BossSquadmate1,
										icon: "user",
										supertext: "1"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-toggle', params: {
										teammate: teammate,
										observable: $root.logic.boss_squadmate_2,
										pool: $root.logic.boss_squadmate_pool_2,
										role: Role.BossSquadmate2,
										icon: "user",
										supertext: "2"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'role-static', params: {
										teammate: teammate,
										role: Role.BossHoldingTheLine,
										supertext: "",
										icon: "flash"
									} } --><!-- /ko -->
								</td>
								<td>
									<span data-bind="
							            if: teammate.survives
							            ">
							            <span class="glyphicon glyphicon-ok-circle text-success"></span>
							        </span>
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.ApproachShieldsDeath,
										supertext: "Shield"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.ApproachArmorDeath,
										supertext: "Armour"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.ApproachWeaponDeath,
										supertext: "Weapon"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.VentsDeath,
										supertext: "Vents"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.LongWalkSquadmateDeath,
										supertext: "LW Squadmate"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.LongWalkFireteamLeaderDeath,
										supertext: "LW Leader"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.LongWalkEscortDeath,
										supertext: "Escort"
									} } --><!-- /ko -->
									<!-- ko component: { name: 'death-role-static', params: {
										teammate: teammate,
										role: Role.BossSquadmateDeath,
										supertext: "Boss Squadmate"
									} } --><!-- /ko -->
								</td>
							</tr>
						<!-- /ko -->
						</tbody>
					</table>
					<div class="row" data-bind="if: boss_survivors()">
						<div class="col-md-4 col-sm-6">
							<div class="form-group">
								<label>Reports on defence</label>
								<!-- ko component: { name: 'teammate-name', params: {
									teammate: summary_defence_reporter
								} } --><!-- /ko -->
							</div>
							<div class="form-group">
								<label>Advocates keeping the base</label>
								<!-- ko component: { name: 'teammate-name', params: {
									teammate: summary_advocates_keeping_base
								} } --><!-- /ko -->
							</div>
							<div class="form-group">
								<label>Advocates destroying the base</label>
								<!-- ko component: { name: 'teammate-name', params: {
									teammate: summary_advocates_destroying_base
								} } --><!-- /ko -->
							</div>
						</div>
						<div class="col-md-4 col-sm-6">
							<div class="form-group">
								<label>Shepard lives</label>
								<p class="form-control-static" data-bind="text: summary_shepard_lives() ? 'Yes' : 'No'"></p>
							</div>
							<div class="form-group">
								<label>Shepard caught by</label>
								<!-- ko component: { name: 'teammate-name', params: {
									teammate: summary_catches_shepard
								} } --><!-- /ko -->
							</div>
						</div>
						<div class="col-md-4 col-sm-12">
							<div class="form-group">
								<label>Hold the line score</label>
								<p class="form-control-static">
									<span data-bind="text: boss_hold_the_line_total"></span> ÷ <span data-bind="text: boss_hold_the_line_candidates().length"></span> = <span data-bind="text: Math.round(boss_hold_the_line_rating() * 1000) / 1000"></span>
								</p>
							</div>
							<div class="form-group">
								<label>Hold the line deaths</label>
								<p class="form-control-static" data-bind="text: boss_hold_the_line_death_count"></p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="panel panel-default">
				<!-- ko with: $root.state.stage -->
					<div class="panel-heading">
						<h2 class="panel-title" data-bind="text: label"></h2>
					</div>
				<!-- /ko -->

				<div class="panel-body">
					<!-- ko with: $root.state.stage -->
						<!-- ko if: id === Constants.StageIDs.Setup -->
							<div class="row">
								<div class="col-md-8">
									<h3>Teammates</h3>
									<p>The game requires at least <strong>8</strong> teammates to be recruited.</p>
									<table class="table table-rounded table-striped setup-table table-condensed">
										<thead>
										<tr>
											<th width="60%"></th>
											<th>
												<div class="checkbox">
													<label><input type="checkbox" data-bind="checked: all_recruited" /> Recruited</label>
												</div>
											</th>
											<th>
												<div class="checkbox">
													<label><input type="checkbox" data-bind="checked: all_loyal" /> Loyal</label>
												</div>
											</th>
										</tr>
										</thead>
										<tbody>
										<!-- ko foreach: $root.state.teammates().value() -->
										<tr>
											<td>
												<div class="checkbox">
													<label>
													<a href="#view-profile" data-bind="click: function () { $root.henchman(henchman) }, text: henchman.name"></a>
													</label>
												</div>
											</td>
											<td>
												<div class="checkbox">
													<label>
														<input type="checkbox" data-bind="attr: { 'disabled': (henchman.is_essential ? 'disabled' : undefined) }, checked: is_recruited" /> &nbsp;
													</label>
												</div>
											</td>
											<td>
												<div class="checkbox">
													<label>
														<input type="checkbox" data-bind="attr: { 'disabled': (is_recruited() ? undefined : 'disabled') }, checked: is_loyal" /> &nbsp;
													</label>
												</div>
											</td>
										</tr>
										<!-- /ko -->
										</tbody>
									</table>
								</div>
								<div class="col-md-4">
									<h3>Normandy</h3>
									<form role="form">
										<div class="form-group">
											<label>Upgrades</label>
											<div class="checkbox">
												<label><input type="checkbox" data-bind="checked: $root.state.normandy.has_armour" /> <span data-placement="right" data-toggle="tooltip" data-html="true" title="Provided by <em>Jacob Taylor</em>">Has Armour upgrade?</span></label>
											</div>
											<div class="checkbox">
												<label><input type="checkbox" data-bind="checked: $root.state.normandy.has_shielding" /> <span data-placement="right" data-toggle="tooltip" data-html="true" title="Provided by <em>Tali'zorah</em>">Has Shielding upgrade?</span></label>
											</div>
											<div class="checkbox">
												<label><input type="checkbox" data-bind="checked: $root.state.normandy.has_thanix_cannon" /> <span data-placement="right" data-toggle="tooltip" data-html="true" title="Provided by <em>Garrus Vakarian</em>">Has Thanix Cannon?</span></label>
											</div>
										</div>
										<div class="form-group">
											<label for="normandy-delay"><span data-placement="right" data-toggle="tooltip" data-html="true" title="How many missions were undertaken between the crew being abducted and the Omega 4 relay being accessed.">Mission Delay</span></label>
											<select class="form-control" id="normandy-delay" data-bind="options: Application.getDelayCandidates(), optionsText: Application.renderDelayValue, value: $root.state.normandy.delay"></select>
										</div>
									</form>
								</div>
							</div>


						<!-- /ko -->
						<!-- ko if: id === Constants.StageIDs.Occulus -->
							<form role="form">
								<div class="row">
									<div class="col-sm-6">
										<div class="form-group">
											<label for="occulus-squadmate-1">Squadmate #1</label>
											<select class="form-control" id="occulus-squadmate-1" data-bind="options: getFieldCandidates('occulus_squadmate_1'), optionsText: Application.renderTeammateName, value: getFieldObservable('occulus_squadmate_1')"></select>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<label for="occulus-squadmate-2">Squadmate #2</label>
											<select class="form-control" id="occulus-squadmate-2" data-bind="options: getFieldCandidates('occulus_squadmate_2'), optionsText: Application.renderTeammateName, value: getFieldObservable('occulus_squadmate_2')"></select>
										</div>
									</div>
								</div>
							</form>
						<!-- /ko -->
						<!-- ko if: id === Constants.StageIDs.Vents -->
							<form role="form">
								<div class="row">
									<div class="col-sm-6">
										<div class="form-group">
											<label for="vent-venter">Vents</label>
											<select class="form-control" id="vent-venter" data-bind="options: getFieldCandidates('vent_venter'), optionsText: Application.renderTeammateNameVentVenter, value: getFieldObservable('vent_venter')"></select>
										</div>
										<div class="form-group">
											<label for="vent-leader">Leader</label>
											<select class="form-control" id="vent-leader" data-bind="options: getFieldCandidates('vent_leader'), optionsText: Application.renderTeammateNameVentLeader, value: getFieldObservable('vent_leader')"></select>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<label for="vent-squadmate-1">Squadmate #1</label>
											<select class="form-control" id="vent-squadmate-1" data-bind="options: getFieldCandidates('vent_squadmate_1'), optionsText: Application.renderTeammateName, value: getFieldObservable('vent_squadmate_1')"></select>
										</div>
										<div class="form-group">
											<label for="vent-squadmate-1">Squadmate #2</label>
											<select class="form-control" id="vent-squadmate-1" data-bind="options: getFieldCandidates('vent_squadmate_2'), optionsText: Application.renderTeammateName, value: getFieldObservable('vent_squadmate_2')"></select>
										</div>
									</div>
								</div>
							</form>
						<!-- /ko -->
						<!-- ko if: id === Constants.StageIDs.LongWalk -->
							<form role="form">
								<div class="row">
									<div class="col-sm-6">
										<div class="form-group">
											<label for="long-walk-bubbler">Biotic Bubble</label>
											<select class="form-control" id="long-walk-bubbler" data-bind="options: getFieldCandidates('long_walk_bubbler'), optionsText: Application.renderTeammateNameLongWalkBubbler, value: getFieldObservable('long_walk_bubbler')"></select>
										</div>
										<div class="form-group">
											<label for="long-walk-leader">Leader</label>
											<select class="form-control" id="long-walk-leader" data-bind="options: getFieldCandidates('long_walk_leader'), optionsText: Application.renderTeammateNameLongWalkLeader, value: getFieldObservable('long_walk_leader')"></select>
										</div>
										<div class="form-group">
											<label for="long-walk-escort">Escort</label>
											<select class="form-control" id="long-walk-escort" data-bind="options: getFieldCandidates('long_walk_escort'), optionsText: Application.renderTeammateNameLongWalkEscort, value: getFieldObservable('long_walk_escort')"></select>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<label for="long-walk-squadmate-1">Squadmate #1</label>
											<select class="form-control" id="long-walk-squadmate-1" data-bind="options: getFieldCandidates('long_walk_squadmate_1'), optionsText: Application.renderTeammateName, value: getFieldObservable('long_walk_squadmate_1')"></select>
										</div>
										<div class="form-group">
											<label for="long-walk-squadmate-2">Squadmate #2</label>
											<select class="form-control" id="long-walk-squadmate-2" data-bind="options: getFieldCandidates('long_walk_squadmate_2'), optionsText: Application.renderTeammateName, value: getFieldObservable('long_walk_squadmate_2')"></select>
										</div>
									</div>
								</div>
							</form>
						<!-- /ko -->
						<!-- ko if: id == Constants.StageIDs.Boss -->
							<form role="form">
								<div class="row">
									<!-- ko with: getField('boss_squadmate_1') -->
										<div class="col-sm-6">
											<div class="form-group">
												<label for="boss-squadmate-1">Squadmate #1</label>
												<select class="form-control" id="boss-squadmate-2" data-bind="options: candidates, optionsText: Application.renderTeammateNameBossSquadmate, value: observable"></select>
											</div>
										</div>
									<!-- /ko -->
									<!-- ko with: getField('boss_squadmate_2') -->
										<div class="col-sm-6">
											<div class="form-group">
												<label for="boss-squadmate-2">Squadmate #2</label>
												<select class="form-control" id="boss-squadmate-2" data-bind="options: candidates, optionsText: Application.renderTeammateNameBossSquadmate, value: observable"></select>
											</div>
										</div>
									<!-- /ko -->
								</div>
							</form>
						<!-- /ko -->
						<!-- ko if: id === Constants.StageIDs.Summary -->
							<form role="form">
								<div class="row">
									<div class="col-md-4 col-sm-6">
										<div class="form-group">
											<label>Reports on defence</label>
											<p class="form-control-static" data-bind="text: Application.renderTeammateName(defence_reporter())"></p>
										</div>
										<div class="form-group">
											<label>Advocates keeping the base</label>
											<p class="form-control-static" data-bind="text: Application.renderTeammateNameKeepBaseAdvocate(keep_base_advocate())"></p>
										</div>
										<div class="form-group">
											<label>Advocates destroying the base</label>
											<p class="form-control-static" data-bind="text: Application.renderTeammateName(destroy_base_advocate())"></p>
										</div>
									</div>
									<div class="col-md-4 col-sm-6">
										<div class="form-group">
											<label>Shepard lives</label>
											<p class="form-control-static" data-bind="text: Application.renderYesNo(shepard_lives())"></p>
										</div>
										<div class="form-group">
											<label>Shepard caught by</label>
											<p class="form-control-static" data-bind="text: Application.renderTeammateName(shepard_pulled_up_by())"></p>
										</div>
										<div class="form-group">
											<label>Crew</label>
											<p class="form-control-static" data-bind="text: Application.renderCrewSurvival(crew_survival())"></p>
										</div>
									</div>
									<div class="col-md-4 col-sm-12">
										<div class="form-group">
											<label>Hold the line score</label>
											<p class="form-control-static">
												<span data-bind="text: htl_total"></span> ÷ <span data-bind="text: htl_candidates_count"></span> = <span data-bind="text: htl_score"></span>
											</p>
										</div>
										<div class="form-group">
											<label>Hold the line deaths</label>
											<p class="form-control-static" data-bind="text: htl_death_count"></p>
										</div>
									</div>
								</div>
							</form>
						<!-- /ko -->
					<!-- /ko -->

					<div class="table-responsive">
						<table class="table table-rounded table-striped summary-table table-hover table-condensed" data-bind="visible: $root.state.stage().id !== Constants.StageIDs.Setup">
							<thead>
								<tr>
									<th>Teammates</th>
									<th class="hidden-xs">Death</th>
									<th><span class="visible-xs-inline">O</span><span class="hidden-xs">Occulus</span></th>
									<th><span class="visible-xs-inline">V</span><span class="hidden-xs">Vents</span></th>
									<th><span class="visible-xs-inline">LW</span><span class="hidden-xs">Long Walk</span></th>
									<th><span class="visible-xs-inline">B</span><span class="hidden-xs">Boss</span></th>
								</tr>
							</thead>
							<tbody>
								<!-- ko with: $root.state.teammates().sortByIsRecruited().value() -->
									<!-- ko foreach: $data -->
										<tr data-bind="css: {'text-info info': !is_recruited() }, click: function () { $root.henchman(henchman) }">
											<td data-bind="css: { 'danger text-danger': is_dead(), 'warning text-warning': $root.predictedToBeDead($data) }">
												<span data-bind="text: henchman.name"></span> <!-- ko if: is_loyal() --><span class="glyphicon glyphicon-heart"></span><!-- /ko -->
											</td>
											<td data-bind="css: { 'hidden-xs': true, 'danger text-danger': is_dead(), 'warning text-warning': $root.predictedToBeDead($data) }">
												<!-- ko if: is_dead() -->
													<span data-bind="text: Application.renderTeammateDeathCause(death_cause())"></span>
												<!-- /ko -->
												<!-- ko if: $root.predictedToBeDead($data) -->
													<!-- ko with: $root.state.stage().evaluate().find($data) -->
														<span data-bind="text: Application.renderTeammateDeathCause($data.death_cause)"></span>
													<!-- /ko -->
												<!-- /ko -->
											</td>
											<td data-bind="css: { 'danger': (is_dead() && death_stage_id() === Constants.StageIDs.Occulus) }">
												<!-- ko if: hasRole(Constants.TeammateRoles.OcculusSquadmate1) -->
													<span class="glyphicon glyphicon-user"></span><sup>1</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.OcculusSquadmate2) -->
													<span class="glyphicon glyphicon-user"></span><sup>2</sup>
												<!-- /ko -->
											</td>
											<td data-bind="css: { 'danger': (is_dead() && death_stage_id() === Constants.StageIDs.Vents) }">
												<!-- ko if: hasRole(Constants.TeammateRoles.VentsSquadmate1) -->
												<span class="glyphicon glyphicon-user"></span><sup>1</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.VentsSquadmate2) -->
												<span class="glyphicon glyphicon-user"></span><sup>2</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.VentsVenter) -->
													<span class="glyphicon glyphicon-star"></span>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.VentsLeader) -->
													<span class="glyphicon glyphicon-fire"></span>
												<!-- /ko -->
											</td>
											<td data-bind="css: { 'danger': (is_dead() && death_stage_id() === Constants.StageIDs.LongWalk) }">
												<!-- ko if: hasRole(Constants.TeammateRoles.LongWalkSquadmate1) -->
												<span class="glyphicon glyphicon-user"></span><sup>1</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.LongWalkSquadmate2) -->
												<span class="glyphicon glyphicon-user"></span><sup>2</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.LongWalkBubbler) -->
													<span class="glyphicon glyphicon-star"></span>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.LongWalkLeader) -->
													<span class="glyphicon glyphicon-fire"></span>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.LongWalkEscort) -->
													<span class="glyphicon glyphicon-heart-empty"></span>
												<!-- /ko -->
											</td>
											<td data-bind="css: { 'danger': (is_dead() && death_stage_id() === Constants.StageIDs.Boss) }">
												<!-- ko if: hasRole(Constants.TeammateRoles.BossSquadmate1) -->
													<span class="glyphicon glyphicon-user"></span><sup>1</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.BossSquadmate2) -->
													<span class="glyphicon glyphicon-user"></span><sup>2</sup>
												<!-- /ko -->
												<!-- ko if: hasRole(Constants.TeammateRoles.HeldTheLine) -->
													<span class="glyphicon glyphicon-flash"></span>
												<!-- /ko -->
											</td>
										</tr>
									<!-- /ko -->
								<!-- /ko -->
							</tbody>
						</table>
					</div>
				</div>
				<div class="panel-footer">
					<!-- ko with: $root.state.stage -->
						<div class="row">
							<div class="col-xs-4">
								<button class="btn btn-default btn-block" data-bind="enable: $root.stager.can_go_back, click: function () { $root.stager.back() }">Back</button>
							</div>
							<div class="col-xs-4">
								<button class="btn btn-warning btn-block" data-bind="click: function () { $root.stager.reset() }">Reset</button>
							</div>
							<div class="col-xs-4">
								<button class="" data-bind="enable: is_evaluatable, attr: { 'class': (is_evaluatable() ? 'btn btn-success btn-block' : 'btn btn-default btn-block') }, click: function () { $root.stager.next() }">Next</button>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<form role="form" class="form-horizontal">
									<div class="input-group">
										<span class="input-group-addon">State</span>
										<input class="form-control" type="text" id="serialised" data-bind="value: $root.state.serialised" />
										<span class="input-group-btn">
											<button class="btn btn-warning" type="button" data-bind="click: function () { $root.state.applySerialisedState($('#serialised').val()) }">Restore</button>
											<button class="btn btn-primary" type="button" data-bind="click: function () { $root.share($('#serialised').val()) }">Share</button>
										</span>
									</div>
								</form>
							</div>
						</div>
					<!-- /ko -->
				</div>
			</div>
		</div>

		<div class="modal fade" tabindex="-2" role="dialog" data-bind="modal: $root.share()">
			<!-- ko with: $root.share() -->
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Share URL</h4>
						</div>
						<div class="modal-body">
							<p>Share current state:</p>
							<form role="form">
								<div class="form-group">
									<input type="text" class="form-control" data-bind="attr: {value: 'http://' + window.location.hostname + window.location.pathname + '?' + $data }" />
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-bind="click: function () { $root.share(undefined); }">Close</button>
						</div>
					</div>
				</div>
			<!-- /ko -->
		</div>

		<div class="modal fade" tabindex="-1" role="dialog" data-bind="modal: $root.henchman()">
			<!-- ko with: $root.henchman() -->
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title" data-bind="text: name"></h4>
						</div>
						<div class="modal-body">
							<form class="form-horizontal" role="form">
								<div class="form-group">
									<label class="col-sm-6 control-label">Recruitment can be skipped</label>
									<div class="col-sm-6">
										<p class="form-control-static" data-bind="text: Application.renderYesNo(!is_essential)"></p>
									</div>
								</div>
								<fieldset>
									<legend>Attributes</legend>
									<div class="row">
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label">Tech Expert</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_tech_expert)"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label">Biotic Expert</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_biotic_expert)"></p>
												</div>
											</div>
										</div>
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label">Fireteam Leader</label>
												<div class="col-sm-4">
													<p class="form-control-static"><span data-bind="text: Application.renderYesNo(is_leader)"></span><span data-bind="visible: is_super_leader"> ✸</span></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><abbr title="Hold the line">HTL</abbr> score</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: htl_value"></p>
												</div>
											</div>
										</div>
									</div>
								</fieldset>
								<fieldset>
									<legend>Eligibility for Roles</legend>
									<div class="row">
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label">Vents</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_vent_candidate)"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label">Biotic Bubble</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_bubble_candidate)"></p>
												</div>
											</div>
										</div>
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label">Leader</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_leader_candidate)"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label">Crew Escort</label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderYesNo(is_escort_candidate)"></p>
												</div>
											</div>
										</div>
									</div>
								</fieldset>
								<fieldset>
									<legend>Priority</legend>
									<div class="row">
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="0" data-bind="click: Application.showArmourDeathRankPopover">Armour Death</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getArmourDeathPriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="1" data-bind="click: Application.showShieldingDeathRankPopover">Shielding Death</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getShieldingDeathPriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="2" data-bind="click: Application.showCannonDeathRankPopover">Cannon Death</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getCannonDeathPriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="3" data-bind="click: Application.showLongWalkDeathRankPopover">Long Walk Death</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getLongWalkDeathPriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="4" data-bind="click: Application.showHTMLDeathRankPopover">HTL Death</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getHTLDeathPriorityRank())"></p>
												</div>
											</div>
										</div>
										<div class="col-xs-6">
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="5" data-bind="click: Application.showDefenceReportRankPopover">Defence Report</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getDefenceReportPriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="6" data-bind="click: Application.showKeepBaseAdvocateRankPopover">Keep Base Advocate</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="html: Application.renderRank(getKeepBasePriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="7" data-bind="click: Application.showDestroyBaseAdvocateRankPopover">Destroy Base Advocate</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="html: Application.renderRank(getDestroyBasePriorityRank())"></p>
												</div>
											</div>
											<div class="form-group">
												<label class="col-sm-8 control-label"><a tabindex="8" data-bind="click: Application.showCutsceneRescueRankPopover">Catch Shepard</a></label>
												<div class="col-sm-4">
													<p class="form-control-static" data-bind="text: Application.renderRank(getCutsceneRescuePriorityRank())"></p>
												</div>
											</div>
										</div>
									</div>
								</fieldset>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-primary" data-bind="click: function () { $root.henchman(undefined); }">Close</button>
						</div>
					</div>
				</div>
			<!-- /ko -->
		</div>

		<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash-compat/3.9.3/lodash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
		<script src="/cdn/bundle/assets/bundle.1.0.0.js"></script>
		<script>
			$(function () {

				// Prepare tooltips
				$("[data-toggle=tooltip]").tooltip();

				var app = new Application();

				// Debugging
				window.app = app;

				// Initialise Knockout
				ko.applyBindings(app);
			});
		</script>
	</body>
</html>
